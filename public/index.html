<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Quiz Offerwall</title>

    <!-- CSS Modular -->
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/form.css" />
    <link rel="stylesheet" href="./css/questions.css" />
    <link rel="stylesheet" href="./css/preview.css" />
    <link rel="stylesheet" href="./css/history.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <!-- Scripts Modulares -->
    <script src="./js/quiz-manager.js"></script>
    <script src="./js/quiz-preview.js"></script>
    <script src="./js/drag-drop.js"></script>
    <script src="./js/quiz-history.js"></script>
    <script src="./js/translation.js"></script>
    <script src="./js/success-modal.js"></script>
    <script src="./js/form-management.js"></script>
    <script src="./js/main.js"></script>
  </head>
  <body>
    <!-- Loader de página inteira para tradução -->
    <div id="page-loader" class="page-loader-overlay" style="display: none">
      <div class="loader-content">
        <div class="spinner"></div>
        <span id="loader-text">Traduzindo...</span>
      </div>
    </div>

    <!-- Modal de sucesso -->
    <div id="success-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <span class="material-symbols-rounded success-icon"
            >check_circle</span
          >
          <h2>Quiz criado com sucesso!</h2>
        </div>
        <div class="modal-body">
          <p>
            Seu quiz foi criado e o link está disponível.
            <br />
            Você também pode copiar o código HTML abaixo:
          </p>
          <div class="code-actions">
            <button id="copy-html-btn" class="copy-button">
              <span class="material-symbols-rounded">content_copy</span>
              Copiar código HTML
            </button>
          </div>
        </div>
        <div class="modal-footer">
          <button id="close-modal-btn" class="close-button">Fechar</button>
        </div>
      </div>
    </div>

    <div class="main-container">
      <!-- Lado esquerdo: Formulário -->
      <div class="form-section">
        <h1>Criação de Quiz com Offer Wall</h1>

        <!-- Dropdown de tradução no topo -->
        <div id="translationSection" class="translation-section">
          <div class="translation-controls">
            <span class="translation-label">
              Traduzir campos <b>preenchidos</b>:
            </span>
            <select id="liveTranslateSelect" class="translation-select">
              <option value="">Selecione um idioma</option>
            </select>
            <div id="liveTranslateStatus" class="translation-status"></div>
          </div>
        </div>

        <!-- Container principal do formulário do quiz -->
        <div class="form-container">
          <!-- Campo para nome do quiz (oculto) -->
          <div class="floating-label-group hidden-field">
            <input type="text" id="quizName" placeholder=" " />
            <label for="quizName">Nome do Quiz</label>
          </div>

          <!-- Campo para vertical do quiz -->
          <div class="floating-label-group">
            <input type="text" id="vertical" placeholder=" " />
            <label for="vertical">Vertical</label>
          </div>

          <!-- Campo para domínio do quiz -->
          <div class="floating-label-group">
            <input type="text" id="domain" placeholder=" " />
            <label for="domain">Domínio</label>
          </div>

          <hr />

          <!-- Checkbox para controlar retenção -->
          <div class="retention-checkbox">
            <input type="checkbox" id="withRetention" checked />
            <label for="withRetention" class="retention-label"
              >Com retenção</label
            >
          </div>

          <!-- Campo para label do anúncio (oculto) -->
          <div class="floating-label-group hidden-field">
            <input type="text" id="adLabel" placeholder=" " />
            <label for="adLabel">Ad Label</label>
          </div>

          <!-- Campo para título do quiz -->
          <div class="floating-label-group">
            <input type="text" id="title" placeholder=" " />
            <label for="title">Título</label>
          </div>

          <!-- Campo para subtítulo/greeting do quiz (oculto) -->
          <div class="floating-label-group hidden-field">
            <input type="text" id="greeting" placeholder=" " />
            <label for="greeting">Subtítulo/Greeting</label>
          </div>

          <!-- Campo para descrição do quiz (oculto) -->
          <div class="floating-label-group hidden-field">
            <input type="text" id="description" placeholder=" " />
            <label for="description">Descrição</label>
          </div>

          <!-- Campos de retenção (nome e email) -->
          <div id="retentionFields" class="retention-fields-container">
            <!-- Campo para label do nome -->
            <div class="floating-label-group">
              <input type="text" id="nameLabel" placeholder=" " />
              <label for="nameLabel">Label Nome</label>
            </div>

            <!-- Campo para label do email -->
            <div class="floating-label-group">
              <input type="text" id="emailLabel" placeholder=" " />
              <label for="emailLabel">Label Email</label>
            </div>
          </div>

          <!-- Campo para texto do botão -->
          <div class="floating-label-group">
            <input type="text" id="buttonText" placeholder=" " />
            <label for="buttonText">Texto do botão final</label>
          </div>

          <!-- Campo para rodapé -->
          <div class="floating-label-group">
            <input type="text" id="footnote" placeholder=" " />
            <label for="footnote">Rodapé</label>
          </div>

          <hr />

          <!-- Seletores de cor para personalização do quiz -->
          <div class="colorRow">
            <label for="primaryColor">Cor Primária:</label>
            <div class="colorInputWrapper">
              <input type="color" id="primaryColor" value="#22C55D" />
            </div>
          </div>

          <div class="colorRow">
            <label for="secondaryColor">Cor Secundária:</label>
            <div class="colorInputWrapper">
              <input type="color" id="secondaryColor" value="#16A349" />
            </div>
          </div>

          <div class="colorRow">
            <label for="hoverColor">Cor de Hover:</label>
            <div class="colorInputWrapper">
              <input type="color" id="hoverColor" value="#16A349" />
            </div>
          </div>

          <!-- Container onde as perguntas do quiz serão adicionadas dinamicamente -->
          <div id="questionsContainer" class="questions-container">
            <!-- Perguntas serão adicionadas aqui -->
          </div>

          <!-- Botões para adicionar perguntas, loader e criar o quiz -->
          <div class="action-buttons">
            <div class="button-row">
              <button onclick="addQuestion()">Adicionar Pergunta</button>
              <button onclick="addLoader()">Adicionar Loader</button>
            </div>
            <button onclick="createHtmlTemplate()">Criar Quiz</button>
          </div>
        </div>

        <!-- Área para exibir resposta da API após submissão -->
        <div id="apiResponse" class="api-response"></div>

        <!-- Área para exibir link gerado após criação do template -->
        <div id="linkResponse" class="link-response"></div>
      </div>

      <!-- Lado direito: Preview -->
      <div class="preview-section">
        <div class="preview-header-controls">
          <button onclick="resetPreview()" class="reset-button">
            Reset Preview
          </button>
        </div>
        <div id="quizPreview" class="quiz-preview-container">
          <!-- Barra de progresso fixa no topo -->
          <div id="topProgressBar" class="top-progress-bar">
            <div id="topProgressFill" class="progress-fill"></div>
          </div>

          <div id="previewContent" class="preview-content">
            <div id="previewHeader" class="preview-header-centered">
              <div id="previewAdLabel" class="preview-ad-label-styled">
                Ad Label
              </div>
              <h3 id="previewTitle" class="preview-title-hidden">
                Título do Quiz
              </h3>
              <p id="previewGreeting" class="preview-greeting-hidden">
                Subtítulo do quiz
              </p>
            </div>

            <div id="previewQuestions">
              <div class="preview-question preview-question-item">
                <h4 class="preview-question-header">Pergunta de exemplo</h4>
                <div class="preview-options">
                  <button class="preview-option preview-option-styled">
                    Opção 1
                  </button>
                  <button class="preview-option preview-option-styled">
                    Opção 2
                  </button>
                </div>
              </div>
            </div>

            <div id="previewForm" class="preview-form-hidden">
              <h4 id="previewDescription" class="preview-description-hidden">
                Descrição do formulário
              </h4>
              <div
                id="previewNameInputContainer"
                class="preview-input-container-styled"
              >
                <input
                  id="previewNameInput"
                  type="text"
                  placeholder="Seu nome"
                  class="preview-input-styled"
                />
              </div>
              <div
                id="previewEmailInputContainer"
                class="preview-input-container-styled"
              >
                <input
                  id="previewEmailInput"
                  type="email"
                  placeholder="Seu email"
                  class="preview-input-styled"
                />
              </div>
              <button id="previewButton" class="preview-button-styled">
                Enviar
              </button>
              <p id="previewFootnote" class="preview-footnote-styled">
                Rodapé do formulário
              </p>
            </div>
          </div>
        </div>

        <!-- Histórico de Quizzes -->
        <div id="quizHistory" class="quiz-history">
          <h3 class="history-title-styled">Histórico</h3>
          <div id="historyList" class="history-list-container">
            <!-- Histórico será preenchido aqui -->
          </div>
          <div id="noHistory" class="no-history-container">
            Nenhum quiz criado ainda
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
